<div class="container-fluid">
  <div class="main-body">
    <div class="row gutters-sm">
      <div class="col-md-4 mb-3">
        <div class="sidebar text-center">
          <div class="text-center" *ngIf="userProfile">
            <img src="https://localhost:7280/api/UserProfile/getImages/{{userProfile?.image }}" alt="Profile Picture" class="rounded-circle" style="width: 50px; height: 50px;">
            <h4>{{ userProfile?.username }}</h4>
          </div>
        </div>
      </div>
      <div class="col-md-8">
        <div class="card">
          <div class="card-body">
            <h6 class="mb-3">User Information</h6>
            <div class="row">
              <div class="col-sm-3">
                <h6 class="mb-0">Full Name</h6>
              </div>
              <div class="col-sm-9 text-secondary">
                {{ userProfile?.name }}
              </div>
            </div>
            <hr>
            <div class="row">
              <div class="col-sm-3">
                <h6 class="mb-0">Username</h6>
              </div>
              <div class="col-sm-9 text-secondary">
                {{ userProfile?.username }}
              </div>
            </div>
            <hr>
            <div class="row">
              <div class="col-sm-3">
                <h6 class="mb-0">Email</h6>
              </div>
              <div class="col-sm-9 text-secondary">
                {{ userProfile?.email }}
              </div>
            </div>
            <hr>
            <div class="row">
              <div class="col-sm-3">
                <h6 class="mb-0">Phone</h6>
              </div>
              <div class="col-sm-9 text-secondary">
                {{ userProfile?.phoneNumber }}
              </div>
            </div>
            <hr>
            <div class="row">
              <div class="col-sm-3">
                <h6 class="mb-0">City</h6>
              </div>
              <div class="col-sm-9 text-secondary">
                {{ userProfile?.city }}
              </div>
            </div>
            <hr>
            <div class="row">
              <div class="col-sm-3">
                <h6 class="mb-0">Street</h6>
              </div>
              <div class="col-sm-9 text-secondary">
                {{ userProfile?.street }}
              </div>
            </div>
            <hr>
            <div class="row">
              <div class="col-sm-12">
                <button class="btn btn-primary" [routerLink]="['/edit-profile', userProfile?.id]">Edit</button>
              </div>
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-body">
            <h6 class="mb-3">User Subscriptions</h6>
            <table class="table table-bordered">
              <thead>
                <tr>
                  <th>Subscription ID</th>
                  <th>Service Name</th>
                  <th>Start Date</th>
                  <th>End Date</th>
                  <th>Status</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let sub of userSubscriptions">
                  <td>{{ sub.id }}</td>
                  <td>{{ sub.gymName }}</td>
                  <td>{{ sub.startDate | date: 'yyyy-MM-dd' }}</td>
                  <td>{{ sub.endDate | date: 'yyyy-MM-dd' }}</td>
                  <td>
                    <span [ngClass]="{ 'text-success': isActive(sub.endDate), 'text-danger': !isActive(sub.endDate) }">
                      {{ isActive(sub.endDate) ? 'Active' : 'Not Active' }}
                    </span>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="card mt-4">
          <div class="card-body">
            <h6 class="mb-3">User Orders</h6>
            <table class="table table-bordered">
              <thead>
                <tr>
                  <th>Order ID</th>
                  <th>Total Amount</th>
                  <th>Date</th>
                  <th>Product Name</th>
                  <th>Quantity</th>
                  <th>Price</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let order of userOrders">
                  <td>{{ order.id }}</td>
                  <td>{{ order.totalAmount }} JOD</td>
                  <td>{{ order.orderDate | date: 'yyyy-MM-dd' }}</td> <!-- تنسيق التاريخ -->

                  <td *ngFor="let item of order.orderItems; let i = index">
                    {{ item.productName }}
                    <span *ngIf="i < order.orderItems.length - 1">, </span> <!-- إضافة فاصلة بين العناصر -->
                  </td>
                  <td *ngFor="let item of order.orderItems; let i = index">
                    {{ item.quantity }}
                    <span *ngIf="i < order.orderItems.length - 1">, </span> <!-- إضافة فاصلة بين العناصر -->
                  </td>
                  <td *ngFor="let item of order.orderItems; let i = index">
                    {{ item.price }}JOD
                    <span *ngIf="i < order.orderItems.length - 1">, </span> <!-- إضافة فاصلة بين العناصر -->
                  </td>

                </tr>
              </tbody>
            </table>
            <div *ngIf="userOrders.length === 0" class="alert alert-info">
              No orders found for this user. <!-- رسالة عند عدم وجود طلبات -->
            </div>
          </div>
        </div>


























      </div>
    </div>
  </div>

